<body class="d-flex justify-content-center align-items-center vh-100 bg-light">
    <div class="card p-4 shadow" style="width: 100%; max-width: 400px;">
        <h3 class="card-title text-center mb-4">Andina Trading - Creación de Contrato</h3>

        <form action= "{{#unless data.user.id}}/api/contractCreat/creacionContrato{{else}}/api/contractCreat/creacionContrato/{{data.user.id}}{{/unless}}" method="POST">
            <select class="form-select mb-3" name="mostrar" required>
                <option selected disabled>Seleccione un comisionista</option>
                {{#each data.houses}}
                <option value="{{id}}">{{name}}</option>
                {{/each}}
            </select>

            <!-- Datos del Inversionista -->
            <div class="form-group mb-3">
                {{#if data.investorData.name}}
                <label for="name">Nombre del Inversionista:</label>
                <input type="text" id="name" name="name" value="{{data.investorData.name}}" class="form-control"
                    disabled>
                {{else}}
                <label for="name">Nombre del Inversionista:</label>
                <input type="text" id="name" name="name" class="form-control" required>
                {{/if}}
            </div>

            <div class="form-group mb-3">
                {{#if data.userData.gmail}}
                <label for="gmail">Correo Electrónico (Gmail):</label>
                <input type="email" id="gmail" name="gmail" value="{{data.userData.gmail}}" class="form-control"
                    disabled>
                {{else}}
                <label for="gmail">Correo Electrónico (Gmail):</label>
                <input type="email" id="gmail" name="gmail" class="form-control" required>
                {{/if}}
            </div>

            <div class="form-group mb-3">
                {{#if data.investorData.address}}
                <label for="address">Dirección:</label>
                <input type="text" id="address" name="address" value="{{data.investorData.address}}" class="form-control"
                    disabled>
                {{else}}
                <label for="address">Dirección:</label>
                <input type="text" id="address" name="address" class="form-control" required>
                {{/if}}
            </div>

            <div class="form-group mb-3">
                {{#if data.investorData.phone}}
                <label for="phone">Teléfono:</label>
                <input type="tel" id="phone" name="phone" value="{{data.investorData.phone}}" class="form-control" disabled>
                {{else}}
                <label for="phone">Teléfono:</label>
                <input type="tel" id="phone" name="phone" class="form-control" required>
                {{/if}}
            </div>

            <div class="form-group mb-3">
                {{#if data.investorData.investmentCapacity}}
                <label for="investmentCapacity">Capacidad de Inversión:</label>
                <input type="number" id="investmentCapacity" name="investmentCapacity"
                    value="{{data.investorData.investmentCapacity}}" class="form-control" disabled>
                {{else}}
                <label for="investmentCapacity">Capacidad de Inversión:</label>
                <input type="number" id="investmentCapacity" name="investmentCapacity" class="form-control" required>
                {{/if}}
            </div>

            <div class="mb-3">
                <label for="id" class="form-label">ID de la accion</label>
                <input type="text" class="form-control" id="id" name="idaccion" value="{{data.selectedStock.id}}"
                    required readonly>
            </div>

            <div class="form-group mb-3">
                <label for="stock">Acciones o Producto de Interés:</label>
                <input type="text" id="stock" value="{{data.selectedStock.name}}" name="stock" class="form-control"
                    required>
            </div>

            <div class="form-group mb-3">
                <label for="phone">Monto:</label>
                <input type="number" id="amount" name="amount" class="form-control" required>
            </div>

            <div class="form-group mb-3">
                <label for="tipo">Tipo:</label>
                <select id="type" name="type" class="form-control" required>
                    <option value="" disabled selected>Selecciona una opción</option>
                    <option value="compra">Compra</option>
                    <option value="venta">Venta</option>
                </select>
            </div>


            <div class="form-group mb-3">
                <label for="expirationDate">Fecha de Expiración del Contrato:</label>
                <input type="date" id="expirationDate" name="expirationDate" class="form-control" required readonly>
            </div>

            <script>
                // Obtener la fecha actual
                const today = new Date();

                // Sumar tres meses
                today.setMonth(today.getMonth() + 3);

                // Formatear la fecha en el formato AAAA-MM-DD
                const formattedDate = today.toISOString().split('T')[0];

                // Establecer la fecha calculada como el valor del campo
                document.getElementById('expirationDate').value = formattedDate;
            </script>


            <div class="form-group mb-4">
                <label for="terms">Términos y Condiciones:</label>
                <textarea id="terms" name="terms" class="form-control" rows="3" required
                    readonly>Al generar este contrato aceptas los terminos y contratos.    </textarea>
            </div>


            <!-- Botón de Envío -->
            <button type="submit" class="btn btn-primary w-100">Crear Contrato</button>



        </form>



    </div>



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>